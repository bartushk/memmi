machine:
  node:
    version: 6.1.0

dependencies:
  pre:
    - wget https://github.com/google/protobuf/releases/download/v3.1.0/protoc-3.1.0-linux-x86_64.zip
    - unzip protoc-3.1.0-linux-x86_64.zip
    - npm install -g protobufjs
    - export GOPATH=$(pwd)/web
    - go get -u github.com/golang/protobuf/proto 
    - go get -u github.com/golang/protobuf/protoc-gen-go
    - export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$(pwd)/lib
    - export PATH=$PATH:$(pwd)/bin
    - ./pbuf.sh

  override:
    - go get -d ./web/...

test:
  override:
    - go test -v ./web/...
