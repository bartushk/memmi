machine:
  node:
    version: 6.1.0
  environment:
    PATH: "${HOME}/memmi/web/bin:${PATH}"
    GOPATH: "${HOME}/memmi/web"

dependencies:
  pre:
    - wget https://github.com/google/protobuf/releases/download/v3.1.0/protoc-3.1.0-linux-x86_64.zip
    - unzip protoc-3.1.0-linux-x86_64.zip
    - npm install -g protobufjs
    - go get -u github.com/golang/protobuf/proto 
    - go get -u github.com/golang/protobuf/protoc-gen-go
    - ./bin/protoc --go_out=./web/src/memmi/pbuf ./proto/*.proto
    - ./pbuf.sh

  override:
    - go get -d ./web/...

test:
  override:
    - go test -v ./web/...
